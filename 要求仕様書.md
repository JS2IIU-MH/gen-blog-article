# Gutenbergブロック変換CLIアプリ 要求仕様書

## 1. 概要

本アプリは、Markdown文書をGutenbergブロック構文へ変換するCLIツールです。  
ブロック構文の定義は外部ファイルで管理し、仕様変更時の修正容易性を重視します。



## 2. ディレクトリ構成案

```
gen-blog-article/
├── articles/                # 入力・出力用Markdownファイル格納ディレクトリ
├── src/                     # アプリ本体のソースコード
│   ├── main.py              # CLIエントリポイント
│   ├── converter.py         # 変換ロジック
│   ├── block_def_loader.py  # ブロック定義ファイルの読み込み
│   ├── file_utils.py        # ファイル入出力ユーティリティ
│   └── tests/               # テストコード
│       ├── test_converter.py
│       └── test_block_def_loader.py
├── block-defs.yaml          # ブロック構文定義ファイル（YAML形式推奨）
├── README.md                # 使い方・仕様説明
├── requirements.txt         # Python依存管理ファイル
```



## 3. 主要ファイル案

- `src/main.py`  
 CLIのエントリポイント。引数解析、ファイル/ディレクトリ指定、変換処理呼び出し。

- `src/converter.py`  
 Markdown→Gutenbergブロックへの変換ロジック。  
 ブロック定義に従い各要素を変換。

- `src/block_def_loader.py`  
 ブロック構文定義ファイル（YAML/JSON）の読み込み・パース。

- `src/file_utils.py`  
 ファイル入出力、ディレクトリ内ファイル一覧取得、_gbファイル名生成など。

- `block-defs.yaml`  
 Gutenbergブロック構文の定義ファイル。  
 例：heading, paragraph, table, code, math などのパターンを記述。

- `src/tests/`  
 主要ロジックの単体テスト・統合テスト。

- `README.md`  
 使い方、拡張方法、ブロック仕様変更手順などのドキュメント。



## 4. 機能要件

1. **Markdown文書の入力**  
 - ファイル指定、またはディレクトリ指定で複数ファイル対応。
 - ファイル指定時は、`tkinter`のファイル選択ダイアログを利用可能。

2. **Gutenbergブロック構文への変換**  
 - 見出し、段落、リスト、画像、リンク、表、数式、コードブロックなど主要Markdown要素に対応。  
 - ブロック構文の定義は外部ファイルで管理し、仕様変更時に容易に修正可能。

3. **変換結果の出力**  
 - 変換後は元ファイル名に「_gb」を付与したMarkdownファイルとして、元ファイルと同じディレクトリに保存。

4. **拡張性・保守性**  
 - ブロック構文のマッピングや変換ロジックをモジュール化。  
 - 定義ファイルの変更のみで新しいブロックや仕様変更に対応可能。

5. **エラーハンドリング**  
 - 入力不備、変換失敗時の明確なエラーメッセージ表示。

6. **テストコードの整備**  
 - 主要変換ロジックの単体テスト・統合テスト。

7. **設定ファイルによるカスタマイズ**  
 - ブロック構文の定義や変換ルールを外部ファイル（YAML/JSON）で管理。

8. **ドキュメント整備**  
 - 使い方、拡張方法、ブロック仕様変更時の手順説明。



## 5. 非機能要件

- Pythonによる実装
- requirements.txtによる依存管理
- コードの可読性・保守性重視
- テスト容易な設計


